<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>smp 126 WebWorker</title>
</head>
<body>
  <input id="xnum" type="text" size="10" />を越えない一番大きな素数は
  <span id="xres">－</span>です。
  <input id="xbtn" type="button" value="計算" />

<script>

document.addEventListener('DOMContentLoaded', function () {
  let xres = document.getElementById('xres');
  let xworker = new Worker('process.js');

  document.getElementById('xbtn').addEventListener('click', function (e) {
    xworker.postMessage({
      num: document.getElementById('xnum').value,
    });
    xres.textContent = '（計算中...）';
  });

  xworker.addEventListener('message', function (e) {
    xres.textContent = e.data;
  }, false);

  xworker.addEventListener('error', function (e) {
    window.alert(e.message);
  }, false);
}, false);

</script>

</body>
</html>