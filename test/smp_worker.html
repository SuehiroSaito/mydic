<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>smp 125 WebWorker</title>
</head>
<body>
  <input id="num" type="text" size="10" />を越えない一番大きな素数は
  <span id="result">－</span>です。
  <input id="btn" type="button" value="計算" />

<script>

document.addEventListener('DOMContentLoaded', function () {
  let result = document.getElementById('result');
  let xworker = new Worker('process.js');

  document.getElementById('btn').addEventListener('click', function (e) {
    xworker.postMessage({
      num: document.getElementById('num').value,
    });
    result.textContent = '（計算中...）';
  });

  xworker.addEventListener('message', function (e) {
    result.textContent = e.data;
  }, false);

  xworker.addEventListener('error', function (e) {
    window.alert(e.message);
  }, false);
}, false);

</script>

</body>
</html>